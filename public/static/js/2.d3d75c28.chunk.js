(this["webpackJsonpqr-quebec"]=this["webpackJsonpqr-quebec"]||[]).push([[2],{1500:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return u}));var a=r(8),n=r.n(a),s=r(13),c=r(20),i=function(){var e=Object(s.a)(n.a.mark((function e(t,r){var a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/licence/exists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,product:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(s=e.sent).data){e.next=9;break}return e.abrupt("return",s.data);case 9:return e.abrupt("return",null);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(n.a.mark((function e(t,r){var a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=fetch,e.t1="/api/licence/restore",e.t2={"Content-Type":"application/json"},e.t3=JSON,e.next=7,Object(c.e)();case 7:return e.t4=e.sent,e.t5=t,e.t6=r,e.t7={userUuid:e.t4,email:e.t5,key:e.t6},e.t8=e.t3.stringify.call(e.t3,e.t7),e.t9={method:"POST",headers:e.t2,body:e.t8},e.next=15,(0,e.t0)(e.t1,e.t9);case 15:return a=e.sent,e.next=18,a.json();case 18:if(!(s=e.sent).data){e.next=21;break}return e.abrupt("return",s.data);case 21:return e.abrupt("return",null);case 24:return e.prev=24,e.t10=e.catch(0),console.error(e.t10),e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=Object(s.a)(n.a.mark((function e(t,r,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=fetch,e.t1="/api/paypal/order/init",e.t2={"Content-Type":"application/json"},e.t3=JSON,e.next=7,Object(c.e)();case 7:return e.t4=e.sent,e.t5=t,e.t6=r,e.t7=JSON.stringify(a),e.t8={userUuid:e.t4,email:e.t5,product:e.t6,fullData:e.t7},e.t9=e.t3.stringify.call(e.t3,e.t8),e.t10={method:"POST",headers:e.t2,body:e.t9},e.next=16,(0,e.t0)(e.t1,e.t10);case 16:e.next=21;break;case 18:e.prev=18,e.t11=e.catch(0),console.error(e.t11);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,r,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(s.a)(n.a.mark((function e(t,r){var a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=fetch,e.t1="/api/paypal/order/captured",e.t2={"Content-Type":"application/json"},e.t3=JSON,e.next=7,Object(c.e)();case 7:return e.t4=e.sent,e.t5=t,e.t6=JSON.stringify(r),e.t7={userUuid:e.t4,email:e.t5,fullData:e.t6},e.t8=e.t3.stringify.call(e.t3,e.t7),e.t9={method:"POST",headers:e.t2,body:e.t8},e.next=15,(0,e.t0)(e.t1,e.t9);case 15:return a=e.sent,e.next=18,a.json();case 18:if(!(s=e.sent).data){e.next=21;break}return e.abrupt("return",s.data);case 21:return e.abrupt("return",null);case 24:return e.prev=24,e.t10=e.catch(0),console.error(e.t10),e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,r){return e.apply(this,arguments)}}()},1810:function(e,t,r){},1811:function(e,t,r){},1817:function(e,t,r){"use strict";r.r(t),r.d(t,"HelpHome",(function(){return w})),r.d(t,"HelpRestorePurchases",(function(){return R}));var a,n=r(6),s=r(7),c=r(10),i=r(9),l=r(3),o=r(24),u=r(48),d=(r(1810),r(31)),h=r.p+"static/media/kyber_studio.faf1f060.png",p=["title","titleId"];function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e,t){var r=e.title,n=e.titleId,s=m(e,p);return l.createElement("svg",b({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"link",className:"svg-inline--fa fa-link fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":n},s),r?l.createElement("title",{id:n},r):null,a||(a=l.createElement("path",{fill:"currentColor",d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"})))}var j,v=l.forwardRef(f),O=(r.p,["title","titleId"]);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function k(e,t){var r=e.title,a=e.titleId,n=y(e,O);return l.createElement("svg",x({"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"envelope",className:"svg-inline--fa fa-envelope fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":a},n),r?l.createElement("title",{id:a},r):null,j||(j=l.createElement("path",{fill:"currentColor",d:"M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"})))}var g=l.forwardRef(k),N=(r.p,r(4)),w=function(e){Object(c.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return Object(N.jsxs)("div",{className:"container-fluid help-home",children:[Object(N.jsxs)("div",{className:"card mt-3",children:[Object(N.jsx)("div",{className:"card-header",children:Object(N.jsx)("h2",{className:"help-home--title",children:"QR Qu\xe9bec"})}),Object(N.jsxs)("div",{className:"card-body",children:["Version ",u.a,Object(N.jsxs)("div",{className:"text-center mt-3",children:["Une app fi\xe8rement Qu\xe9b\xe9coise par:",Object(N.jsx)("a",{href:"https://kyber.studio",target:"_blank",rel:"noreferrer",children:Object(N.jsx)("img",{className:"help-home--ks",src:h,alt:"Kyber Studio"})})]}),Object(N.jsxs)("div",{className:"mt-3",children:[Object(N.jsx)(v,{className:"help-home--icon",height:"16px",width:"16px",color:d.a.qrqc}),Object(N.jsx)("a",{href:"https://qr-quebec.com/docs/fr/conditions-d-utilisation/",target:"_blank",rel:"noreferrer",children:"Condition d'utilisation"})]}),Object(N.jsxs)("div",{className:"mt-1",children:[Object(N.jsx)(v,{className:"help-home--icon",height:"16px",width:"16px",color:d.a.qrqc}),Object(N.jsx)("a",{href:"https://qr-quebec.com/docs/fr/politique-de-confidentialite/",target:"_blank",rel:"noreferrer",children:"Politique de confidentialit\xe9"})]}),Object(N.jsx)("div",{className:"mt-3",children:"* Non affili\xe9 au Gouvernement du Qu\xe9bec."})]})]}),Object(N.jsxs)("div",{className:"card mt-3",children:[Object(N.jsx)("div",{className:"card-header",children:Object(N.jsx)("h2",{className:"help-home--title",children:"Support"})}),Object(N.jsxs)("div",{className:"card-body",children:[Object(N.jsxs)("div",{className:"mt-1",children:[Object(N.jsx)(g,{className:"help-home--icon",height:"16px",width:"16px",color:d.a.qrqc}),"Courriel\xa0:\xa0",Object(N.jsx)("a",{href:"mailto:support@kyber.studio?subject=QR Qu\xe9bec",children:"support@kyber.studio"})]}),Object(N.jsxs)("div",{className:"mt-1",children:[Object(N.jsx)(v,{className:"help-home--icon",height:"16px",width:"16px",color:d.a.qrqc}),"Web\xa0:\xa0",Object(N.jsx)("a",{href:"https://support.kyber.studio",target:"_blank",rel:"noreferrer",children:"https://support.kyber.studio"})]})]})]}),Object(N.jsxs)("div",{className:"card mt-3",children:[Object(N.jsx)("div",{className:"card-header",children:Object(N.jsx)("h2",{className:"help-home--title",children:"R\xe9cup\xe9rer mes achats"})}),Object(N.jsxs)("div",{className:"card-body",children:[Object(N.jsx)("div",{className:"mt-1",children:"Si vous avez r\xe9install\xe9 cette app ou vid\xe9 votre stockage, cliquez sur le bouton ci-dessous pour r\xe9cup\xe9rer vos achats."}),Object(N.jsx)("div",{className:"mt-3",children:Object(N.jsx)(o.b,{to:"/aide/recuperer",children:Object(N.jsx)("button",{type:"button",className:"btn btn-qrqc w-100",children:"R\xe9cup\xe9rer mes achats"})})})]})]}),Object(N.jsx)("br",{})]})}}]),r}(l.Component),q=r(8),C=r.n(q),V=r(13),S=r(43),E=r(11),P=(r(1811),r(1500)),T=r(44),z=r(18),I=function(e){Object(c.a)(r,e);var t=Object(i.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).emailOnChange=a.emailOnChange.bind(Object(S.a)(a)),a.isEmailValid=a.isEmailValid.bind(Object(S.a)(a)),a.keyOnChange=a.keyOnChange.bind(Object(S.a)(a)),a.isKeyValid=a.isKeyValid.bind(Object(S.a)(a)),a.restorePurchases=a.restorePurchases.bind(Object(S.a)(a)),a.state={email:"",key:"",readyToValidate:!1},a}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=Object(V.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(T.a)(),e.next=3,z.getItem("email");case 3:(t=e.sent)?(this.setState({email:t,readyToValidate:!0}),this.isEmailValid()):this.setState({readyToValidate:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(e){return e.preventDefault(),!1}},{key:"emailOnChange",value:function(e){this.setState({email:e.currentTarget.value}),this.isEmailValid()}},{key:"keyOnChange",value:function(e){this.setState({key:e.currentTarget.value}),this.isKeyValid()}},{key:"isEmailValid",value:function(){var e=document.getElementById("email-field");return!!e&&(e.checkValidity()?(e.classList.remove("is-invalid"),e.classList.add("is-valid"),!0):(e.classList.remove("is-valid"),e.classList.add("is-invalid"),!1))}},{key:"isKeyValid",value:function(){var e=document.getElementById("key-field");return!!e&&(e.checkValidity()?(e.classList.remove("is-invalid"),e.classList.add("is-valid"),!0):(e.classList.remove("is-valid"),e.classList.add("is-invalid"),!1))}},{key:"restorePurchases",value:function(){var e=Object(V.a)(C.a.mark((function e(){var t,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEmailValid()||!this.isKeyValid()){e.next=15;break}return e.next=3,Object(P.d)(this.state.email,this.state.key);case 3:if(t=e.sent,r=[],!(t&&t.length>0)){e.next=14;break}return t.forEach((function(e){var t={};t.product=e.product,t.licence=e.licence,r.push(t)})),e.next=9,z.setItem("licences",r);case 9:return alert(r.length.toString()+" achats r\xe9cup\xe9r\xe9s avec succc\xe8s."),this.props.history.push("/presenter"),e.abrupt("return");case 14:alert("Cette adresse courriel ou ce code de r\xe9cup\xe9ration ne sont pas valides, ou aucun achat n'y sont associ\xe9s.");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(N.jsxs)("div",{className:"container-fluid help-restore-purchases",children:[Object(N.jsxs)("div",{className:"card mt-3",children:[Object(N.jsx)("div",{className:"card-header",children:Object(N.jsx)("h2",{className:"help-restore-purchases--title",children:"R\xe9cup\xe9rer mes achats"})}),Object(N.jsxs)("div",{className:"card-body",children:[Object(N.jsx)("div",{className:"mb-3",children:"Vous retrouverez ces informations dans votre courriel de confirmation d'achat."}),Object(N.jsxs)("div",{className:"mb-3",children:["En cas de probl\xe8me, n'h\xe9sitez pas \xe0 nous contacter \xe0 l'adresse ",Object(N.jsx)("a",{href:"mailto:support@kyber.studio?subject=QR Qu\xe9bec",children:"support@kyber.studio"})," ."]}),Object(N.jsxs)("form",{id:"paypal-form",className:"needs-validation "+(this.state.readyToValidate?"was-validated":""),noValidate:!0,onSubmit:this.onSubmit,children:[Object(N.jsxs)("div",{className:"mb-3",children:[Object(N.jsx)("label",{className:"form-label",htmlFor:"email-field",children:"Adresse courriel:"}),Object(N.jsx)("input",{id:"email-field",className:"form-control",type:"email",required:!0,placeholder:"votre-nom@fournisseur.qc.ca",value:this.state.email,onChange:this.emailOnChange}),Object(N.jsx)("div",{className:"valid-feedback",children:"Adresse courriel valide"}),Object(N.jsx)("div",{className:"invalid-feedback",children:"Veuillez saisir une adresse courriel valide"})]}),Object(N.jsxs)("div",{className:"mb-3",children:[Object(N.jsx)("label",{className:"form-label",htmlFor:"key-field",children:"Code de r\xe9cup\xe9ration:"}),Object(N.jsx)("input",{id:"key-field",className:"form-control",type:"text",maxLength:5,required:!0,placeholder:"12345",value:this.state.key,onChange:this.keyOnChange}),Object(N.jsx)("div",{className:"valid-feedback",children:"Ce code semble valide"}),Object(N.jsx)("div",{className:"invalid-feedback",children:"Veuillez saisir un code de r\xe9cup\xe9ration"})]})]}),Object(N.jsx)("button",{className:"btn btn-qrqc w-100",onClick:this.restorePurchases,children:"R\xe9cup\xe9rer mes achats"})]})]}),Object(N.jsx)("br",{})]})}}]),r}(l.Component),R=Object(E.g)(I)}}]);
//# sourceMappingURL=2.d3d75c28.chunk.js.map